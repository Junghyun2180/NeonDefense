# PvE 랜덤 타워 디펜스 설계 정리

본 문서는 현재 구현된 시스템을 기반으로, PvE 전용 랜덤 타워 디펜스 게임의 **중·장기 방향성**을 정리한 설계 문서이다.

---

## 0. 현재 구현 상태 요약

- 타워 랜덤 뽑기 + 타일 고정 배치
- 타워 **파괴 가능**
- 동일 속성 · 동일 티어 타워 **3개 합성 시 상위 티어 승급**
- 스테이지당 **10개 웨이브** 구성
- 스테이지 변경 시 **경로 랜덤 재생성**
- PvE 전용 (멀티플레이 고려하지 않음)
- HTML 기반 (모바일 / PC 공통 플레이)

---

## 1. 게임 정체성 정의

> **스테이지마다 바뀌는 경로에 맞춰, 랜덤으로 뽑은 타워를 운영과 합성으로 최적화하는 PvE 로그라이크 타워 디펜스**

핵심 키워드:
- 랜덤은 *재료*
- 실력은 *운영*
- 스테이지는 *퍼즐*

---

## 2. 스테이지 구조 설계 (10웨이브)

각 스테이지는 하나의 완결된 퍼즐로 설계한다.

### 웨이브 역할 분배

| 웨이브 | 목적 |
|------|------|
| 1~2 | 경로 파악 / 초기 배치 실험 |
| 3~4 | 빠른 적 등장 (제어 테스트) |
| 5 | 미니 엘리트 |
| 6~7 | 방해자 / 억제자 등장 |
| 8 | 엘리트 혼합 |
| 9 | 빌드 검증 웨이브 |
| 10 | 스테이지 보스 |

---

## 3. 스테이지 종료 보상 카드 (20종)

스테이지 종료 시 **3장 중 1장 선택**

### A. 운영 / 안정 계열 (6종)
1. 무료 파괴 횟수 +1
2. 다음 스테이지 첫 웨이브 보상 +1
3. 변환 토큰 1개 획득
4. 타워 파괴 환급률 +20%
5. 상점 리롤 비용 감소
6. 웨이브 준비 시간 증가

### B. 빌드 강화 계열 (7종)
7. 화염 등장 확률 증가
8. 냉기 등장 확률 증가
9. 전격 등장 확률 증가
10. 질풍 등장 확률 증가
11. 공허 등장 확률 증가
12. 광휘 등장 확률 증가
13. 동일 속성 3개 이상 시 시너지 강화

### C. 리스크 / 리턴 계열 (7종)
14. 엘리트 증가 / 보상 증가
15. 방해자 증가 / 상점 할인
16. 웨이브 +2 / 보상 2배
17. 보스 체력 증가 / 합성 비용 감소
18. 경로 분기 증가 / 골드 증가
19. 최대 배치 -1 / 전체 공격력 증가
20. 파괴 불가 / 합성 결과 선택 가능

---

## 4. 합성 티어 트리 설계

### 기본 규칙
- T1 → T2 → T3 → T4
- 동일 속성 · 동일 티어 타워 3개 합성
- **T2 이상부터 역할 분기 발생**

### 예시: 화염 속성

- **T1**: 연소 (기본 DoT)
- **T2 선택**
  - 연소 누적형
  - 폭발형
- **T3 선택**
  - 보스 파괴자 (체력 비례)
  - 웨이브 정리자 (광역)
- **T4**
  - 연소 + 폭발 동시 적용

※ 다른 속성(냉기, 전격, 질풍, 공허, 광휘)도 동일한 구조 적용

---

## 5. 랜덤 경로 생성 규칙 (난이도 연동)

### 경로 설계 목적
- 속성 가치 변화 유도
- 배치 전략 재구성

### 핵심 파라미터
1. 경로 길이
2. 분기 수
3. 교차로 수
4. 막다른 길 여부
5. 적 밀집도

### 스테이지별 변화 예시

| 스테이지 | 경로 특징 |
|--------|----------|
| 1~2 | 단일 경로, 분기 없음 |
| 3~4 | 분기 1개, 교차로 등장 |
| 5~6 | 분기 2개, 합류 지점 |
| 7~8 | 짧은 경로, 밀집 증가 |
| 9+ | 다중 분기, 랜덤 합류 |

### 경로 태그 시스템 (내부용)
- SHORT
- LONG
- BRANCH
- CROSS
- DENSE

※ 태그는 적 스폰, 보상 카드 풀, 등장 확률 보정에 활용

---

## 6. 핵심 재미 루프

1. 랜덤 경로 확인
2. 제한된 배치 결정
3. 웨이브 중 문제 발생
4. 합성 / 파괴로 대응
5. 스테이지 종료
6. 보상 선택 후 다음 퍼즐 진입

---

## 7. 설계 요약

- 랜덤은 통제 가능해야 한다
- 배치는 되돌릴 수 없지만, 운영으로 복구 가능해야 한다
- 합성은 강화가 아니라 **결정**이다
- 경로 랜덤은 난이도가 아니라 **전략 변화 장치**다

이 문서는 MVP 및 이후 확장 설계의 기준 문서로 사용한다.
